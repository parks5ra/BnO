(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9045],{51746:function(e,o,t){"use strict";t.d(o,{E:function(){return a}});var n=t(97247),a=function(e){return{type:n.Z,data:e}}},65050:function(e,o,t){"use strict";var n=t(41408).ZP.div.withConfig({componentId:"sc-2vbw0x-0"})(["width:100dvw;height:100dvh;display:flex;justify-content:center;align-items:center;overflow:hidden;"]);o.Z=n},89196:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return v}});var n=t(27378),a=t(86677),c=t(62557),r=t(21318),i=t(50813),l=t(65050),u=t(48787),s=t(51746),d=t(24246),v=(0,c.Z)((function(e){var o=e.country,t=e.language,c=e.threediumSiteUrl,s=e.pageQuery,v=e.userInfo,p=e.saveComposerEventAction,g=(0,n.useRef)(null),f=(0,a.useRouter)(),m=null===s||void 0===s?void 0:s.get("page"),w=null===s||void 0===s?void 0:s.get("slug"),h=null===s||void 0===s?void 0:s.get("composition"),b=null===s||void 0===s?void 0:s.get("tid"),C=null===s||void 0===s?void 0:s.get("ttiid"),y=null===s||void 0===s?void 0:s.get("origin"),k=null===s||void 0===s?void 0:s.get("name"),I="productselection"===(null===m||void 0===m?void 0:m.toLowerCase())?"/product":"",P="productselection"===(null===m||void 0===m?void 0:m.toLowerCase())?"productselection":null,E=function(){if(g.current){var e=window.location.href;g.current.contentWindow.postMessage({eventName:"CurrentNavigationUrl",source:"site",url:{parentUrl:e}},"*"),console.log("Message sent to iframe:",{eventName:"CurrentNavigationUrl",source:"site",url:{parentUrl:e}})}};return(0,n.useEffect)((function(){return f.events.on("routeChangeComplete",E),function(){f.events.off("routeChangeComplete",E)}}),[f]),(0,n.useEffect)((function(){var e=(0,u.Pc)(v),n=function(n){console.log(n.data);var a=n.data,c=a.page,i=a.productPath,l=a.target,s=a.eventName,d=a.composition,v=a.source,I=a.compositionDrafts,P=a.data,E=d||{id:null,tid:null,ttiid:null,name:null},L=E.id,N={beoId:null,event:s,productPath:i||null,page:c||null,source:v,target:l,status:null,tId:E.tid,ttiId:E.ttiid,compositionDrafts:I||null,compositionId:L||null,name:E.name||null};switch(c){case"Landing":f.push("/".concat(t,"/").concat(null===o||void 0===o?void 0:o.toLowerCase(),"/composer"),void 0,{shallow:!0}),p(N);break;case"BeoHome":f.push("/".concat(t,"/").concat(null===o||void 0===o?void 0:o.toLowerCase()),void 0,{shallow:!0}),p(N);break;case"ProductSelection":f.push("/".concat(t,"/").concat(null===o||void 0===o?void 0:o.toLowerCase(),"/composer?page=productselection"),void 0,{shallow:!0}),p(N);break;case"ProductOverview":f.push("/".concat(t,"/").concat(null===o||void 0===o?void 0:o.toLowerCase(),"/composer/product/").concat(i),void 0,{shallow:!0}),p(N);break;case"ViewProductPage":window.open("/".concat(t,"/").concat(null===o||void 0===o?void 0:o.toLowerCase()).concat(i),l),p(N);break;default:console.log("Unhandled page event :".concat(c))}switch(s){case"MyAccount":e?(f.push("/".concat(t,"/").concat(null===o||void 0===o?void 0:o.toLowerCase(),"/my-account/my-compositions")),p(N)):((0,u.t_)("fromComposer","true"),f.push("/".concat(t,"/").concat(null===o||void 0===o?void 0:o.toLowerCase(),"/login")),p(N));break;case"SaveComposition":case"Share":case"Download":p(N);break;case"BookAStoreVisit":f.push("/".concat(t,"/checkout?step=postcode&flow=composerbookademo")),p(N);break;case"GTM":(0,r.q8)(P);break;case"IframeLoaded":!function(){if(g.current){var e={eventName:"IframeAttributes",source:"site",locale:t,country:o,productSlug:w||null,page:m||null,origin:y||null,composition:{id:h||null,name:k||null,tid:b||null,ttiid:C||null}};g.current.contentWindow.postMessage(e,"*"),console.log("atrribute data",e)}}();break;default:console.log("Unhandled event :".concat(s))}};window.addEventListener("message",n);var a=(0,r.v8)({pageType:i.c3X,pageName:i.c3X});return(0,r.q8)(a),function(){window.removeEventListener("message",n)}}),[]),(0,d.jsx)("div",{className:"active",children:(0,d.jsx)(l.Z,{children:(0,d.jsx)("iframe",{ref:g,src:"".concat(c).concat(I,"?locale=").concat(t,"&country=").concat(o),style:{width:"100%",height:"100%",border:"none"},title:"Composer",allow:"fullscreen; clipboard-read; clipboard-write","data-page":P,"data-locale":t,"data-country":o})})})}),{key:"ComposerPage",mapStateToProps:function(e){return{country:e.getIn(["global","globalData","country"]),language:e.getIn(["global","globalData","userlanguage"]),pageQuery:e.getIn(["global","globalData","pageQuery"]),threediumSiteUrl:e.getIn(["global","header","loginAPI","threediumSiteUrl"]),userInfo:e.getIn(["global","userData"])}},mapDispatchToProps:function(e){return{saveComposerEventAction:function(o){return e((0,s.E)(o))}}},useQuery:!0})},15889:function(e,o,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[language]/[country]/composer",function(){return t(89196)}])}},function(e){e.O(0,[9774,2888,179],(function(){return o=15889,e(e.s=o);var o}));var o=e.O();_N_E=o}]);